<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>배달의 만족</title>
    <link th:href="@{/css/ocss/mainpage.css}" rel="stylesheet"/>
    <link th:href="@{/css/ocss/storeDetails.css}" rel="stylesheet"/>
    <script th:src="@{/js/ojs/main.js}"></script>
</head>
<body>
<header th:replace="~{Header :: body}"></header>
<div class="StoreDetails">
    <div id="CarouselDetail" class="carousel slide CarouselDetail" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button th:each="image, iter : ${storeDetails.images}"
                    th:classappend="${iter.index == 0} ? 'active' : ''"
                    type="button"
                    data-bs-target="#CarouselDetail"
                    th:data-bs-slide-to="${iter.index}"
                    th:attr="aria-current=${iter.index == 0} ? 'true' : 'false'"
            >
            </button>
        </div>
        <div class="carousel-inner">
            <div th:each="image, iter : ${storeDetails.images}"
                 class="carousel-item" th:classappend="${iter.index == 0} ? ' active' : ''">
                <img th:src="${image.imageUrl}" class="StoreImage" alt="Store Image">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#CarouselDetail" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#CarouselDetail" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>

    <div class="StoreContent">
        <div class="ContentHeader">
            <span class="StoreName" th:text="${storeDetails.store}"></span>
            <button class="LikesBtn" id="LikesBtn">
                <img class="LikesIcon" th:src="@{/img/storedetailimg/LikesIconBefore.png}">
            </button>
        </div>
        <div class="RatingAndInfoDiv">
            <div class="StoreRatingDiv">
                <img class="StarIcon" th:src="@{/img/storedetailimg/StarIcon.png}">
                <span class="StarRating">4.5</span>
                &nbsp;&nbsp;
                <span class="StarRating">리뷰 243개 ></span>
            </div>
        </div>
        <hr>
        <div class="ContentDiv">
            <div class="LeftContent">
                <span class="MinOrderFont">최소주문금액</span>
            </div>
            <div>
                <span th:text="${storeDetails.minOrder}"></span>원<br/>
            </div>
        </div>
        <div class="ContentDiv">
            <div class="LeftContent">
                <span class="MinOrderFont">배달</span>
            </div>
            <div>
                <span th:text="${storeDetails.deliTime}"></span><br/>
                <span class="DeliTipTitle">배달팁 </span><span th:text="${storeDetails.deliTip}"></span>
            </div>
        </div>
    </div>
    <div class="TopMenuDiv">
        <div class="TopMenuStyle SelectMenu" id="FoodMenuBtn">
           <span class="TopMenuFont">메뉴</span>
        </div>
        <div class="TopMenuStyle" id="StoreInfoBtn">
            <span class="TopMenuFont">가게 정보</span>
        </div>
        <div class="TopMenuStyle" id="ReviewBtn">
            <span class="TopMenuFont">리뷰</span>
        </div>
    </div>

    <div th:each="food : ${storeDetails.foods}" class="FoodMenuDiv">
        <div class="FoodContentDiv">
            <span class="FoodNameFont" th:text="${food.food}">음식 이름</span><br/>
            <span class="FoodDescFont" th:text="${food.description}">음식 설명</span><br/>
            <span class="FoodPriceFont" th:text="${food.price}+원">가격</span><br/>
        </div>
        <div>
            <img class="FoodImage" th:src="@{${food.imageUrl}}" alt="Food Image"/>
        </div>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const foodMenuBtn = document.getElementById("FoodMenuBtn");
        const storeInfoBtn = document.getElementById("StoreInfoBtn");
        const reviewBtn = document.getElementById("ReviewBtn");

        function handleClick(section) {
            console.log(`Clicked on ${section}`);
            document.querySelectorAll('.TopMenuStyle').forEach(btn => btn.classList.remove('SelectMenu'));
            this.classList.add('SelectMenu');

            switch (section) {
                case "FoodMenu":
                    // Add your logic for the "메뉴" button here
                    break;
                case "StoreInfo":
                    // Add your logic for the "가게 정보" button here
                    break;
                case "Review":
                    // Add your logic for the "리뷰" button here
                    break;
            }
        }

        // Attach event listeners to each button
        foodMenuBtn.addEventListener("click", function() {
            handleClick.call(this, "FoodMenu");
        });

        storeInfoBtn.addEventListener("click", function() {
            handleClick.call(this, "StoreInfo");
        });

        reviewBtn.addEventListener("click", function() {
            handleClick.call(this, "Review");
        });
    });
</script>
<div th:replace="~{Footer :: body}"></div>
</body>
</html>